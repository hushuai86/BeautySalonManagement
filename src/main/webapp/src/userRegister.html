<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta http-equiv="Content-Type" content="multipart/form-data" />
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>login</title>
<link rel="stylesheet" type="text/css" href="/BeautySalonManagement/src/login/css/normalize.css" />
<link rel="stylesheet" type="text/css" href="/BeautySalonManagement/src/login/css/demo.css" />
<!--必要样式-->
<link rel="stylesheet" type="text/css" href="/BeautySalonManagement/src/login/css/component.css" />
<!-- jQuery -->
<script src="/BeautySalonManagement/libs/jquery/jquery/dist/jquery.js"></script>

<!-- Bootstrap -->
<script src="/BeautySalonManagement/libs/jquery/bootstrap/dist/js/bootstrap.js"></script>

<!-- Angular -->
<script src="/BeautySalonManagement/libs/angular/layer/layer.js"></script>
<script src="/BeautySalonManagement/libs/angular/angular/angular.js"></script>
<script src="/BeautySalonManagement/libs/jquery/pjpdf/pdfobject.js"></script>
<script src="/BeautySalonManagement/libs/angular/angular-animate/angular-animate.js"></script>
<script src="/BeautySalonManagement/libs/angular/angular-aria/angular-aria.js"></script>
<script src="/BeautySalonManagement/libs/angular/angular-cookies/angular-cookies.js"></script>
<script src="/BeautySalonManagement/libs/angular/angular-messages/angular-messages.js"></script>
<script src="/BeautySalonManagement/libs/angular/angular-resource/angular-resource.js"></script>
<script src="/BeautySalonManagement/libs/angular/angular-sanitize/angular-sanitize.js"></script>
<script src="/BeautySalonManagement/libs/angular/angular-touch/angular-touch.js"></script>

<script src="/BeautySalonManagement/libs/angular/angular-ui-router/release/angular-ui-router.js"></script>
<script src="/BeautySalonManagement/libs/angular/ngstorage/ngStorage.js"></script>
<script src="/BeautySalonManagement/libs/angular/angular-ui-utils/ui-utils.js"></script>

<!-- bootstrap -->
<script src="/BeautySalonManagement/libs/angular/angular-bootstrap/ui-bootstrap-tpls.js"></script>
<!-- lazyload -->
<script src="/BeautySalonManagement/libs/angular/oclazyload/dist/ocLazyLoad.js"></script>
<!-- translate -->
<script src="/BeautySalonManagement/libs/angular/angular-translate/angular-translate.js"></script>
<script src="/BeautySalonManagement/libs/angular/angular-translate-loader-static-files/angular-translate-loader-static-files.js"></script>
<script src="/BeautySalonManagement/libs/angular/angular-translate-storage-cookie/angular-translate-storage-cookie.js"></script>
<script src="/BeautySalonManagement/libs/angular/angular-translate-storage-local/angular-translate-storage-local.js"></script>

<!-- App -->
<script src="/BeautySalonManagement/src/js/app.js"></script>
<script src="/BeautySalonManagement/src/js/config.js"></script>
<script src="/BeautySalonManagement/src/js/config.lazyload.js"></script>
<script src="/BeautySalonManagement/src/js/config.router.js"></script>
<script src="/BeautySalonManagement/src/js/main.js"></script>
<script src="/BeautySalonManagement/src/js/services/ui-load.js"></script>
<script src="/BeautySalonManagement/src/js/filters/fromNow.js"></script>
<script src="/BeautySalonManagement/src/js/directives/setnganimate.js"></script>
<script src="/BeautySalonManagement/src/js/directives/ui-butterbar.js"></script>
<script src="/BeautySalonManagement/src/js/directives/ui-focus.js"></script>
<script src="/BeautySalonManagement/src/js/directives/ui-fullscreen.js"></script>
<script src="/BeautySalonManagement/src/js/directives/ui-jq.js"></script>
<script src="/BeautySalonManagement/src/js/directives/ui-module.js"></script>
<script src="/BeautySalonManagement/src/js/directives/ui-nav.js"></script>
<script src="/BeautySalonManagement/src/js/directives/ui-scroll.js"></script>
<script src="/BeautySalonManagement/src/js/directives/ui-shift.js"></script>
<script src="/BeautySalonManagement/src/js/directives/ui-toggleclass.js"></script>
<script src="/BeautySalonManagement/src/js/controllers/bootstrap.js"></script>

<!--[if IE]>
<script src="login/js/html5.js"></script>
<![endif]-->
</head>
<body ng-app="myApp">
	<div class="container demo-1" ng-controller="mainCtrl">
		<div class="content">
			<div id="large-header" class="large-header">
				<canvas id="demo-canvas"></canvas>
				<div class="logo_box" style="margin-top: -300px;">
					<h3>欢迎会员注册</h3>
					<form name="form" method="post" enctype="multipart/form-data">
						<div class="input_outer">
							<span class="u_user"></span> <input name="loginId"  autocomplete="off" class="text" required style="color: #FFFFFF !important" type="text" pattern="^[a-zA-Z][a-zA-Z0-9]{3,15}$" ng-model="loginId" placeholder="请输入账号">
						</div>
						<div class="input_outer" style="margin-top: -20px;">
							<span class="us_uer"></span> <input name="password" ng-model="password" autocomplete="off" class="text" required style="color: #FFFFFF !important; position: absolute; z-index: 100;" pattern="^[0-9A-Za-z]{6,16}$" value="" type="password" placeholder="请输入密码">
						</div>
						<div class="input_outer" style="margin-top: -20px;">
							<span class="us_uer"></span> <input name="password2" ng-model="password2" autocomplete="off" class="text" required style="color: #FFFFFF !important; position: absolute; z-index: 100;" value="" type="password" placeholder="请再次输入密码">
						</div>
						<div class="input_outer" style="margin-top: -20px;">
							<span class="u_user"></span> <input name="name" class="text" required autocomplete="off" style="color: #FFFFFF !important" type="text" pattern="^[\u4E00-\u9FA5]{2,5}$|^[A-Za-z]{2,10}$" ng-model="name" autocomplete="off" placeholder="请输入昵称">
						</div>
						<div class="input_outer" style="margin-top: -20px;" ng-init="sex='男'">
							<span class="u_user"></span> <input type="radio" style="margin-top: 16px; margin-left: 50px;" name="sex" value="男" ng-model="sex" required>男 <input type="radio" style="margin-left: 20px;" name="sex" value="女" ng-model="sex" required>女
						</div>
						<div class="input_outer" style="margin-top: -20px;">
							 <i class="u_user"></i> <input name="phone" autocomplete="off" class="text" required autocomplete="off" style="color: #FFFFFF !important" type="text" pattern="^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$" ng-model="phone" placeholder="请输入电话号码">
						</div>
						<div class="mb2">
							<a href="" class="act-but submit" ng-click="register(form)" style="color: #FFFFFF">注册</a> <a class="act-but submit" href="/BeautySalonManagement/src/login.html" style="background: #bdba5e; color: #fff" style="color: #FFFFFF">返回</a>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- /container -->
	<script src="/BeautySalonManagement/src/login/js/TweenLite.min.js"></script>
	<script src="/BeautySalonManagement/src/login/js/EasePack.min.js"></script>
	<script src="/BeautySalonManagement/src/login/js/rAF.js"></script>
	<script src="/BeautySalonManagement/src/login/js/demo-1.js"></script>
	<div style="text-align: center;"></div>
	<script>
		var app1 = angular.module('myApp', [ 'ui.bootstrap' ]);
		app1
				.controller(
						'mainCtrl',
						[
								'$scope',
								'$location',
								'$window',
								'$http',
								'$filter',
								function($scope, $location, $window, $http,
										$filter) {
									$scope.register = function(form) {

										if (form.loginId.$invalid) {
											alert("账号仅支持6-10位英文字母加数字，首位必须是字母！")
											return;
										}
										if (form.password.$invalid) {
											alert("密码仅支持6-10位 英文字母加数字")
											return;
										}
										if ($scope.password != $scope.password2) {
											alert("两次输入的密码不一致，请重新输入！");
											return;
										}
										if (form.name.$invalid) {
											alert("昵称仅支持2-5位中文或2-10位英文")
											return;
										}
										if (form.phone.$invalid) {
											alert("请输入正确手机号")
											return;
										}
										var fd = new FormData();
										fd.append('name', $scope.name);
										fd.append('loginId', $scope.loginId);
										fd.append('password', $scope.password);
										fd.append('sex', $scope.sex);
										fd.append('phone', $scope.phone);
										$http(
												{
													method : 'POST',
													url : "/BeautySalonManagement/account/registerUser.do",
													data : fd,
													headers : {
														'Content-Type' : undefined
													},
													transformRequest : angular.identity
												})
												.success(
														function(data) {
															console.log(data)
															if (data.code == 200) {
																alert("注册成功！")
																window.location.href = "/BeautySalonManagement/src/login.html"
															} else {
																alert(data.msg)
															}
														})
									}
								} ]);
	</script>
</body>
</html>